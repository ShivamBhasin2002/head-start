"use client";

import { ChevronDown } from "lucide-react";
import { Logo } from "@/src/svgs/Logo";
import { BackgroundDetailing } from "@/src/svgs/BackgroundDetailing";
import Image from "next/image";
import { useState, useEffect } from "react";
import { motion } from "framer-motion";
import { SearchSheet } from "@/src/components/SearchSheet";
import { containerVariants, itemVariants } from "@/lib/mockCityData";
import { CityCardCarousel } from "@/src/components/CityCardCarousel";
import { getCities } from "@/lib/api";
import { API_URL } from "@/src/constants";
import Cookies from "js-cookie";

const tripInspirations = {
  Worldwide: [
    {
      city: "Tokyo",
      image: "/tokyo.jpg",
      user: "martiitram",
      plan: "Plan you trip to Dubai for 5 days",
    },
    {
      city: "Mount Fuji",
      image: "/fuji.jpg",
      user: "martiitram",
      plan: "Plan you trip to Dubai for 5 days",
    },
    {
      city: "Kyoto",
      image: "/kyoto.jpg",
      user: "martiitram",
      plan: "Plan you trip to Dubai for 5 days",
    },
  ],
  Japan: [
    {
      city: "Tokyo",
      image: "/tokyo.jpg",
      user: "martiitram",
      plan: "Plan you trip to Dubai for 5 days",
    },
    {
      city: "Mount Fuji",
      image: "/fuji.jpg",
      user: "martiitram",
      plan: "Plan you trip to Dubai for 5 days",
    },
    {
      city: "Kyoto",
      image: "/kyoto.jpg",
      user: "martiitram",
      plan: "Plan you trip to Dubai for 5 days",
    },
  ],
};

export default function HomePage() {
  const [selectedTrip, setSelectedTrip] = useState<"Worldwide" | "Japan">(
    "Worldwide"
  );
  const [isSearchSheetOpen, setIsSearchSheetOpen] = useState(false);
  const [username, setUsername] = useState("Traveller");
  const [waId, setWaId] = useState("");
  const [inputState, setInputState] = useState<"idle" | "loading" | "success">(
    "idle"
  );
  const [isNewUser, setIsNewUser] = useState<boolean | null>(null);

  useEffect(() => {
    const cookieUsername = Cookies.get("username");
    const cookieWaId = Cookies.get("number");
    console.log(cookieUsername, cookieWaId);
    if (cookieUsername) {
      setUsername(cookieUsername);
    }
    if (cookieWaId) {
      setWaId(cookieWaId);
    }
  }, []);

  useEffect(() => {
    async function checkCities() {
      try {
        const cities = await getCities();
        setIsNewUser(!cities || cities.length === 0);
      } catch (e) {
        setIsNewUser(true); // treat as new user if error
      }
    }
    checkCities();
  }, []);

  if (isNewUser === null) {
    return (
      <div className="text-center py-12 text-white/60 relative h-screen">
        <div className="flex justify-center items-center h-screen">
          <div className="w-16 h-16 border-4 border-t-transparent border-white rounded-full animate-spin"></div>
        </div>
      </div>
    );
  }

  return (
    <div className="bg-gradient-to-b from-[#1a0b2e] to-[#0d001a] min-h-screen text-white font-sans overflow-hidden relative px-4">
      <motion.svg
        xmlns="http://www.w3.org/2000/svg"
        width="375"
        height="442"
        viewBox="0 0 375 442"
        fill="none"
        className="fixed top-[-60px]"
      >
        <g filter="url(#filter0_f_79_14021)">
          <circle
            cx="173.5"
            cy="220.5"
            r="107.5"
            fill="#4788C1"
            fillOpacity="0.21"
          />
        </g>
        <defs>
          <filter
            id="filter0_f_79_14021"
            x="-48"
            y="-1"
            width="443"
            height="443"
            filterUnits="userSpaceOnUse"
            colorInterpolationFilters="sRGB"
          >
            <feFlood floodOpacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="57"
              result="effect1_foregroundBlur_79_14021"
            />
          </filter>
        </defs>
      </motion.svg>
      <motion.svg
        xmlns="http://www.w3.org/2000/svg"
        width="375"
        height="443"
        viewBox="0 0 375 443"
        fill="none"
        className="fixed top-[3px]"
      >
        <g filter="url(#filter0_f_79_14022)">
          <circle
            cx="200.5"
            cy="221.5"
            r="107.5"
            fill="#5A0075"
            fillOpacity="0.6"
          />
        </g>
        <defs>
          <filter
            id="filter0_f_79_14022"
            x="-21"
            y="0"
            width="443"
            height="443"
            filterUnits="userSpaceOnUse"
            colorInterpolationFilters="sRGB"
          >
            <feFlood floodOpacity="0" result="BackgroundImageFix" />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="BackgroundImageFix"
              result="shape"
            />
            <feGaussianBlur
              stdDeviation="57"
              result="effect1_foregroundBlur_79_14022"
            />
          </filter>
        </defs>
      </motion.svg>
      <BackgroundDetailing className="absolute top-[0] left-0 right-0" />
      <motion.div
        className="flex flex-col items-center text-center w-full"
        variants={containerVariants}
        initial="hidden"
        animate="visible"
      >
        <div className="mt-[66px] mb-[14px] flex flex-col items-center justify-center">
          <motion.div variants={itemVariants} className="mb-[10px]">
            {isNewUser ? (
              <Logo width={167.53244018554688} height={170} />
            ) : (
              <svg
                width="100"
                height="88"
                viewBox="0 0 100 88"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g filter="url(#filter0_d_54_1756)">
                  <path
                    d="M4.8 36V12.096H9.372V21.924H20.1V12.096H24.672V36H20.1V25.812H9.372V36H4.8ZM36.5515 36.288C31.2595 36.288 27.9475 32.904 27.9475 27.612C27.9475 22.356 31.4755 18.684 36.4435 18.684C41.5915 18.684 44.6515 22.104 44.6515 27.468V28.98H32.3395C32.6275 31.428 34.2115 32.796 36.6235 32.796C39.1435 32.796 40.2235 31.608 40.7635 30.168L44.6515 31.536C43.4635 34.272 40.9795 36.288 36.5515 36.288ZM32.2675 25.884H40.1515C39.9715 23.4 38.6395 22.14 36.3355 22.14C34.1755 22.14 32.5915 23.508 32.2675 25.884ZM52.7696 36.432C49.1336 36.432 46.8656 34.452 46.8656 31.5C46.8656 27.684 49.7096 26.82 53.5256 25.992C56.6576 25.38 58.2416 25.236 58.3496 24.3V24.12C58.3496 23.112 57.4496 22.176 55.1456 22.176C52.8416 22.176 51.7616 23.328 51.6536 24.84V25.092H47.2256C47.3696 21.24 50.3936 18.684 55.1816 18.684C59.7896 18.684 62.5976 20.7 62.5976 25.308V36H58.3136V33.696C57.2336 35.46 55.2896 36.432 52.7696 36.432ZM53.8136 33.228C55.9376 33.228 58.2416 32.148 58.3496 28.98V27.54C57.3776 28.116 55.7936 28.404 54.3896 28.764C52.6616 29.196 51.3656 29.772 51.3656 31.284C51.3656 32.436 52.2656 33.228 53.8136 33.228ZM73.0239 36.36C68.7759 36.36 65.4639 33.12 65.4639 27.576C65.4639 22.176 68.7399 18.648 73.0599 18.648C75.2199 18.648 77.0199 19.62 78.2079 21.204V11.772H82.5639V36H78.2439V33.804C77.0559 35.388 75.2199 36.36 73.0239 36.36ZM74.2839 32.724C76.8399 32.724 78.4239 30.636 78.4239 27.576V27.288C78.4239 24.228 76.9119 22.284 74.2839 22.284C71.8359 22.284 70.1439 24.12 70.1439 27.468V27.72C70.1439 31.068 71.7639 32.724 74.2839 32.724Z"
                    fill="white"
                  />
                </g>
                <g filter="url(#filter1_d_54_1756)">
                  <path
                    d="M5.34 77.99C4.84 77.99 4.43 77.85 4.11 77.57C3.81 77.31 3.66 77.02 3.66 76.7C3.66 76.34 3.71 76.07 3.81 75.89C3.93 75.69 4.18 75.55 4.56 75.47C5.5 75.25 6.47 74.99 7.47 74.69C8.49 74.37 9.44 74.04 10.32 73.7C11.2 73.34 11.91 72.99 12.45 72.65C13.01 72.31 13.29 72.01 13.29 71.75C13.29 71.51 13.07 71.28 12.63 71.06C12.19 70.82 11.63 70.56 10.95 70.28C10.27 70 9.54 69.69 8.76 69.35C7.98 69.01 7.25 68.62 6.57 68.18C5.89 67.74 5.33 67.24 4.89 66.68C4.45 66.1 4.23 65.44 4.23 64.7C4.23 63.54 4.51 62.46 5.07 61.46C5.65 60.44 6.4 59.5 7.32 58.64C8.24 57.78 9.25 56.99 10.35 56.27C11.47 55.53 12.57 54.88 13.65 54.32C14.75 53.74 15.73 53.23 16.59 52.79C16.87 52.63 17.14 52.52 17.4 52.46C17.66 52.4 17.89 52.37 18.09 52.37C18.67 52.37 19.09 52.5 19.35 52.76C19.61 53.02 19.74 53.32 19.74 53.66C19.74 53.94 19.59 54.27 19.29 54.65C18.99 55.01 18.56 55.33 18 55.61C17.44 55.89 16.77 56.03 15.99 56.03H15.75C15.07 56.39 14.33 56.82 13.53 57.32C12.73 57.82 11.94 58.37 11.16 58.97C10.38 59.57 9.66 60.19 9 60.83C8.36 61.45 7.84 62.05 7.44 62.63C7.06 63.21 6.87 63.74 6.87 64.22C6.87 64.8 7.09 65.32 7.53 65.78C7.97 66.24 8.53 66.65 9.21 67.01C9.91 67.37 10.64 67.72 11.4 68.06C12.18 68.4 12.91 68.75 13.59 69.11C14.29 69.45 14.86 69.83 15.3 70.25C15.74 70.65 15.96 71.12 15.96 71.66C15.96 72.28 15.74 72.87 15.3 73.43C14.88 73.99 14.32 74.51 13.62 74.99C12.92 75.45 12.15 75.87 11.31 76.25C10.49 76.61 9.68 76.92 8.88 77.18C8.08 77.44 7.36 77.64 6.72 77.78C6.1 77.92 5.64 77.99 5.34 77.99ZM20.7736 67.4C20.2336 67.36 19.9836 67.01 20.0236 66.35C20.0436 66.19 20.1536 66 20.3536 65.78C20.5536 65.54 20.7836 65.41 21.0436 65.39C21.6636 65.33 22.4236 65.24 23.3236 65.12C24.2436 64.98 25.2536 64.82 26.3536 64.64C26.5536 63.66 26.7936 62.63 27.0736 61.55C27.3536 60.47 27.6636 59.42 28.0036 58.4C28.3436 57.36 28.7036 56.42 29.0836 55.58C29.4636 54.74 29.8636 54.08 30.2836 53.6C30.5036 53.38 30.7036 53.23 30.8836 53.15C31.0636 53.05 31.2236 53 31.3636 53C31.6436 53 31.8636 53.12 32.0236 53.36C32.2036 53.6 32.2936 53.87 32.2936 54.17C32.2936 54.33 32.2636 54.49 32.2036 54.65C31.8036 55.77 31.3736 57.15 30.9136 58.79C30.4536 60.43 29.9636 62.22 29.4436 64.16C31.2836 63.86 33.1236 63.54 34.9636 63.2C36.8036 62.86 38.3836 62.55 39.7036 62.27C40.0836 62.11 40.3736 62.14 40.5736 62.36C40.7936 62.58 40.9036 62.8 40.9036 63.02C40.9036 63.3 40.8236 63.51 40.6636 63.65C40.5236 63.79 40.3736 63.91 40.2136 64.01L40.1836 64.04C39.7836 64.2 39.1836 64.39 38.3836 64.61C37.5836 64.81 36.6636 65.03 35.6236 65.27C34.5836 65.49 33.4736 65.71 32.2936 65.93C31.1336 66.15 29.9836 66.35 28.8436 66.53C28.3836 68.29 27.9136 70.1 27.4336 71.96C26.9736 73.8 26.5136 75.61 26.0536 77.39C25.8536 78.11 25.6236 78.56 25.3636 78.74C25.1236 78.94 24.8636 79.04 24.5836 79.04C24.2636 79.04 23.9836 78.92 23.7436 78.68C23.5236 78.44 23.4936 77.95 23.6536 77.21L25.8436 66.98C24.6436 67.16 23.5836 67.29 22.6636 67.37C21.7636 67.45 21.1336 67.46 20.7736 67.4ZM39.648 77.78C38.888 77.78 38.258 77.43 37.758 76.73C37.278 76.01 37.038 75.08 37.038 73.94C37.038 72.88 37.298 71.83 37.818 70.79C38.358 69.75 39.068 68.75 39.948 67.79C40.828 66.83 41.788 65.95 42.828 65.15C43.868 64.33 44.908 63.62 45.948 63.02C47.008 62.42 47.978 61.95 48.858 61.61C49.738 61.27 50.438 61.1 50.958 61.1C51.238 61.1 51.468 61.16 51.648 61.28C51.828 61.38 51.918 61.57 51.918 61.85C51.918 62.03 51.848 62.2 51.708 62.36C51.728 62.36 51.748 62.36 51.768 62.36C52.208 62.36 52.428 62.62 52.428 63.14C52.428 63.32 52.358 63.69 52.218 64.25C52.078 64.79 51.918 65.47 51.738 66.29C51.558 67.11 51.398 68.02 51.258 69.02C51.118 70 51.048 71 51.048 72.02C51.048 72.88 51.378 73.31 52.038 73.31C52.778 73.31 53.528 73.14 54.288 72.8C55.048 72.46 55.788 72.05 56.508 71.57C57.228 71.07 57.888 70.58 58.488 70.1C59.088 69.6 59.598 69.18 60.018 68.84C60.438 68.5 60.738 68.33 60.918 68.33C61.078 68.33 61.218 68.38 61.338 68.48C61.458 68.58 61.518 68.74 61.518 68.96C61.518 69.16 61.318 69.52 60.918 70.04C60.518 70.56 59.988 71.15 59.328 71.81C58.668 72.47 57.928 73.11 57.108 73.73C56.288 74.35 55.448 74.86 54.588 75.26C53.728 75.66 52.908 75.86 52.128 75.86C51.528 75.86 50.978 75.68 50.478 75.32C49.998 74.94 49.608 74.3 49.308 73.4C49.028 72.5 48.888 71.26 48.888 69.68V68.93C47.908 70.55 46.878 72.03 45.798 73.37C44.738 74.71 43.678 75.78 42.618 76.58C41.578 77.38 40.588 77.78 39.648 77.78ZM50.388 63.26C50.288 63.3 50.148 63.36 49.968 63.44C49.048 63.86 48.088 64.38 47.088 65C46.108 65.62 45.148 66.31 44.208 67.07C43.288 67.83 42.458 68.62 41.718 69.44C40.978 70.26 40.388 71.09 39.948 71.93C39.508 72.77 39.288 73.59 39.288 74.39C39.288 74.65 39.338 74.85 39.438 74.99C39.558 75.13 39.758 75.2 40.038 75.2C40.438 75.2 40.958 74.95 41.598 74.45C42.238 73.93 42.938 73.25 43.698 72.41C44.478 71.57 45.258 70.64 46.038 69.62C46.818 68.6 47.558 67.57 48.258 66.53C48.978 65.49 49.598 64.53 50.118 63.65C50.198 63.51 50.288 63.38 50.388 63.26ZM61.5007 77.57C61.1807 77.57 60.9107 77.44 60.6907 77.18C60.4707 76.92 60.3607 76.56 60.3607 76.1C60.3607 75.76 60.4307 75.2 60.5707 74.42C60.7307 73.62 60.9007 72.69 61.0807 71.63C61.2807 70.57 61.4507 69.47 61.5907 68.33C61.7307 67.17 61.8007 66.06 61.8007 65C61.8007 64.48 61.9307 64.1 62.1907 63.86C62.4707 63.6 62.7807 63.47 63.1207 63.47C63.4407 63.47 63.6807 63.67 63.8407 64.07C64.0007 64.47 64.0307 65.27 63.9307 66.47C64.8507 64.43 65.8607 62.79 66.9607 61.55C68.0807 60.29 69.1907 59.39 70.2907 58.85C71.3907 58.29 72.3807 58.01 73.2607 58.01C73.8407 58.01 74.2607 58.13 74.5207 58.37C74.8007 58.59 74.9407 58.84 74.9407 59.12C74.9407 59.5 74.7807 59.8 74.4607 60.02C74.1607 60.22 73.6307 60.46 72.8707 60.74C71.9907 61.08 71.1807 61.48 70.4407 61.94C69.7207 62.38 69.0307 62.96 68.3707 63.68C67.7307 64.4 67.1007 65.32 66.4807 66.44C65.8607 67.54 65.2407 68.9 64.6207 70.52C64.0007 72.14 63.3407 74.09 62.6407 76.37C62.5207 76.81 62.3607 77.12 62.1607 77.3C61.9807 77.48 61.7607 77.57 61.5007 77.57ZM72.0267 67.4C71.4867 67.36 71.2367 67.01 71.2767 66.35C71.2967 66.19 71.4067 66 71.6067 65.78C71.8067 65.54 72.0367 65.41 72.2967 65.39C72.9167 65.33 73.6767 65.24 74.5767 65.12C75.4967 64.98 76.5067 64.82 77.6067 64.64C77.8067 63.66 78.0467 62.63 78.3267 61.55C78.6067 60.47 78.9167 59.42 79.2567 58.4C79.5967 57.36 79.9567 56.42 80.3367 55.58C80.7167 54.74 81.1167 54.08 81.5367 53.6C81.7567 53.38 81.9567 53.23 82.1367 53.15C82.3167 53.05 82.4767 53 82.6167 53C82.8967 53 83.1167 53.12 83.2767 53.36C83.4567 53.6 83.5467 53.87 83.5467 54.17C83.5467 54.33 83.5167 54.49 83.4567 54.65C83.0567 55.77 82.6267 57.15 82.1667 58.79C81.7067 60.43 81.2167 62.22 80.6967 64.16C82.5367 63.86 84.3767 63.54 86.2167 63.2C88.0567 62.86 89.6367 62.55 90.9567 62.27C91.3367 62.11 91.6267 62.14 91.8267 62.36C92.0467 62.58 92.1567 62.8 92.1567 63.02C92.1567 63.3 92.0767 63.51 91.9167 63.65C91.7767 63.79 91.6267 63.91 91.4667 64.01L91.4367 64.04C91.0367 64.2 90.4367 64.39 89.6367 64.61C88.8367 64.81 87.9167 65.03 86.8767 65.27C85.8367 65.49 84.7267 65.71 83.5467 65.93C82.3867 66.15 81.2367 66.35 80.0967 66.53C79.6367 68.29 79.1667 70.1 78.6867 71.96C78.2267 73.8 77.7667 75.61 77.3067 77.39C77.1067 78.11 76.8767 78.56 76.6167 78.74C76.3767 78.94 76.1167 79.04 75.8367 79.04C75.5167 79.04 75.2367 78.92 74.9967 78.68C74.7767 78.44 74.7467 77.95 74.9067 77.21L77.0967 66.98C75.8967 67.16 74.8367 67.29 73.9167 67.37C73.0167 67.45 72.3867 67.46 72.0267 67.4Z"
                    fill="white"
                  />
                </g>
                <defs>
                  <filter
                    id="filter0_d_54_1756"
                    x="3.80005"
                    y="5.77197"
                    width="85.7639"
                    height="32.66"
                    filterUnits="userSpaceOnUse"
                    colorInterpolationFilters="sRGB"
                  >
                    <feFlood floodOpacity="0" result="BackgroundImageFix" />
                    <feColorMatrix
                      in="SourceAlpha"
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                      result="hardAlpha"
                    />
                    <feOffset dx="3" dy="-2" />
                    <feGaussianBlur stdDeviation="2" />
                    <feComposite in2="hardAlpha" operator="out" />
                    <feColorMatrix
                      type="matrix"
                      values="0 0 0 0 0.705907 0 0 0 0 0.409499 0 0 0 0 1 0 0 0 0.35 0"
                    />
                    <feBlend
                      mode="normal"
                      in2="BackgroundImageFix"
                      result="effect1_dropShadow_54_1756"
                    />
                    <feBlend
                      mode="normal"
                      in="SourceGraphic"
                      in2="effect1_dropShadow_54_1756"
                      result="shape"
                    />
                  </filter>
                  <filter
                    id="filter1_d_54_1756"
                    x="2.66003"
                    y="46.37"
                    width="96.4967"
                    height="34.67"
                    filterUnits="userSpaceOnUse"
                    colorInterpolationFilters="sRGB"
                  >
                    <feFlood floodOpacity="0" result="BackgroundImageFix" />
                    <feColorMatrix
                      in="SourceAlpha"
                      type="matrix"
                      values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                      result="hardAlpha"
                    />
                    <feOffset dx="3" dy="-2" />
                    <feGaussianBlur stdDeviation="2" />
                    <feComposite in2="hardAlpha" operator="out" />
                    <feColorMatrix
                      type="matrix"
                      values="0 0 0 0 0.705907 0 0 0 0 0.409499 0 0 0 0 1 0 0 0 0.35 0"
                    />
                    <feBlend
                      mode="normal"
                      in2="BackgroundImageFix"
                      result="effect1_dropShadow_54_1756"
                    />
                    <feBlend
                      mode="normal"
                      in="SourceGraphic"
                      in2="effect1_dropShadow_54_1756"
                      result="shape"
                    />
                  </filter>
                </defs>
              </svg>
            )}
          </motion.div>

          <motion.div variants={itemVariants}>
            <button className="border-2 border-[#ffffff10] rounded-[10px] px-4 py-3 bg-[#ffffff20] backdrop-blur-sm hover:bg-white/20 transition-transform transform active:scale-98 text-[#FFF] font-[halyard-text] font-[500] text-[15px] leading-[20px] tracking-[0] whitespace-nowrap flex gap-1.5 items-center justify-center px-2 py-1.5 mb-[40px]">
              <svg
                width="24"
                height="25"
                viewBox="0 0 24 25"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M24 12.5C24 16.8647 21.8529 20.706 18.599 22.9418C16.7061 24.2432 14.4383 25 12 25C11.8597 25 11.7201 24.9976 11.5805 24.9921C9.20106 24.9073 6.99736 24.101 5.16484 22.7752C2.04376 20.5182 0 16.7578 0 12.5C0 5.59694 5.37307 0 12 0C18.6269 0 24 5.59694 24 12.5Z"
                  fill="#E4FFF0"
                />
                <path
                  d="M9.57306 9.74087C9.28562 9.33222 4.1585 10.254 3.86427 9.29607C3.6485 8.59508 3.53836 5.89877 3.70735 5.48462C3.1966 6.73651 2.80505 8.06305 2.50177 9.4061C2.45726 9.60492 2.4135 9.8226 2.38106 10.0474C2.31467 10.5079 2.29505 10.9959 2.4135 11.4093C2.60286 12.0718 3.08268 12.1692 3.64549 12.2423C5.30147 12.4592 6.94613 12.7861 8.57042 13.2215C8.55005 12.9173 8.55684 12.6116 8.58853 12.3091C8.68736 11.3621 9.03138 10.4497 9.57306 9.74009V9.74087Z"
                  fill="#29609B"
                />
                <path
                  d="M21.3988 9.97105C21.3663 9.7463 21.3233 9.52861 21.2788 9.32979C20.977 7.98595 20.587 6.65941 20.0778 5.40674C20.246 5.82089 20.1336 8.5172 19.9171 9.21819C19.6213 10.1754 14.4957 9.24806 14.2075 9.65671C14.7484 10.3671 15.0917 11.2803 15.1898 12.2273C15.2207 12.5298 15.2275 12.8355 15.2071 13.1397C16.8322 12.7059 18.4776 12.3805 20.1336 12.166C20.6964 12.0929 21.1762 11.9962 21.3663 11.3337C21.4848 10.9204 21.4659 10.4316 21.4003 9.97184L21.3988 9.97105Z"
                  fill="#5494CD"
                />
                <path
                  d="M19.0932 15.4669C19.4508 17.1479 19.5745 18.9066 19.4591 20.6536C19.2433 20.5247 19.0276 20.3966 18.811 20.2678C18.799 21.1613 18.7281 22.0564 18.599 22.9421C16.7062 24.2435 14.4384 25.0002 12 25.0002C11.8597 25.0002 11.7201 24.9979 11.5806 24.9924V8.3328C11.5806 8.3328 12.5213 7.05262 14.5017 7.2208C14.2067 7.36697 13.5941 7.78269 13.4274 8.25342C14.3297 7.99645 15.189 8.20549 15.8159 8.66679C15.4855 8.73988 15.2252 8.99528 15.2056 9.16189C15.6907 9.26641 16.1668 9.42122 16.627 9.62162C17.3467 9.93439 18.0287 10.3611 18.6481 10.8877C18.3131 10.901 17.9782 10.9144 17.6432 10.9277C18.1441 11.2774 18.5704 11.7678 18.8812 12.3494C18.9152 12.4114 18.9468 12.4751 18.9778 12.5395C18.8058 12.4539 18.6073 12.4397 18.424 12.5002C19.229 13.4456 19.7873 14.6802 20.0121 16.0091C19.7058 15.8284 19.3995 15.6476 19.0932 15.4669Z"
                  fill="#08BED0"
                />
                <path
                  d="M11.5805 8.33251V24.9921C9.20107 24.9072 6.99737 24.1009 5.16485 22.7752C4.88647 21.6938 4.72879 20.5645 4.69862 19.425C4.69635 19.3394 4.60129 19.3119 4.56357 19.3865C4.51227 19.4887 4.45041 19.5846 4.37949 19.6694C4.33196 19.7268 4.25048 19.6922 4.25124 19.6136C4.26104 18.35 4.46021 17.0816 4.83592 15.8831C4.86157 15.8014 4.78462 15.733 4.72502 15.7849C4.381 16.0772 4.06187 16.4112 3.77368 16.779C3.72087 16.8466 3.62958 16.7892 3.6492 16.7012C3.94343 15.3464 4.45493 14.0489 5.14901 12.9008C5.19277 12.8285 5.1294 12.7373 5.06074 12.7734L4.44965 13.0996C4.37798 13.1381 4.31461 13.0391 4.36365 12.9668C4.4919 12.7758 4.62468 12.5888 4.76274 12.4064C5.4455 11.5003 6.24068 10.7105 7.1128 10.0732C6.99813 10.1636 6.17579 9.87831 5.93739 9.74786C5.91325 9.7345 5.89515 9.72271 5.88458 9.71328C6.7039 9.32349 7.92608 8.84725 8.79895 8.8166C8.58847 8.17298 8.0483 7.66295 7.0283 7.54271C9.573 6.86451 11.0374 8.08339 11.5805 8.33251Z"
                  fill="#0691AE"
                />
                <path
                  d="M11.8415 20.4057C14.4661 20.4057 16.5937 18.0987 16.5937 15.2528C16.5937 12.4069 14.4661 10.0999 11.8415 10.0999C9.21697 10.0999 7.08936 12.4069 7.08936 15.2528C7.08936 18.0987 9.21697 20.4057 11.8415 20.4057Z"
                  fill="white"
                />
                <path
                  d="M11.5807 10.1079C9.07902 10.2549 7.09184 12.5009 7.09033 15.2506C7.08882 18.0027 9.07675 20.2511 11.5807 20.3981V10.1079Z"
                  fill="#E0E0E0"
                />
                <path
                  d="M11.6471 12.2742C10.9923 12.3237 10.3541 12.6239 9.87725 13.1693C8.88668 14.2993 8.96363 16.0526 10.0493 17.0837C10.4883 17.501 11.0247 17.7359 11.5732 17.7941C12.0787 15.9206 12.1753 13.9952 11.6471 12.2742Z"
                  fill="#02A486"
                />
                <path
                  d="M13.8074 16.9046C14.7979 15.7745 14.721 14.0212 13.6353 12.9902C13.0733 12.4558 12.3513 12.2208 11.6474 12.2743C12.1748 13.9945 12.079 15.9207 11.5735 17.7942C12.3822 17.8791 13.2174 17.5789 13.8074 16.9054V16.9046Z"
                  fill="#04BF8A"
                />
                <path
                  d="M11.6818 16.6796C12.1639 16.7299 12.6618 16.5515 13.0134 16.15C13.6034 15.4765 13.5581 14.4321 12.9108 13.8167C12.5758 13.4984 12.1451 13.3578 11.7264 13.39C11.3363 13.4199 10.9561 13.5983 10.6717 13.9236C10.0817 14.5971 10.127 15.6415 10.7743 16.2568C11.036 16.5052 11.3559 16.6458 11.6826 16.6796H11.6818Z"
                  fill="#263238"
                />
              </svg>
              Hey {username}
            </button>
          </motion.div>
        </div>
      </motion.div>

      {isNewUser ? (
        <div className="w-full text-center py-8">
          <p className="text-white/60 text-lg">
            Welcome! Start by adding your first city to begin planning your
            trip.
          </p>
        </div>
      ) : (
        <CityCardCarousel />
      )}

      <div className="font-[halyard-text] font-semibold text-[18px] leading-[24px] tracking-[0] text-center">
        Have an inspiration?
      </div>

      <form
        className={`mt-4 relative max-w-2xl overflow-hidden rounded-2xl ${isNewUser ? "mx-auto" : "mx-[28px]"}`}
        onSubmit={(e) => {
          e.preventDefault();
          setInputState("loading");
          fetch(`${API_URL}/api/v1/process-message/`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*",
            },
            body: JSON.stringify({
              text: (e.target as HTMLFormElement).message.value,
              waId,
              senderName: username,
            }),
          })
            .then((r) => {
              if (r.status === 200) {
                setInputState("success");
                (e.target as HTMLFormElement).message.value = "";
              } else {
                setInputState("idle");
              }
            })
            .catch((err) => {
              setInputState("idle");
            });
        }}
      >
        {inputState === "success" && (
          <motion.div
            initial={{ y: "100%" }}
            animate={{ y: 0 }}
            exit={{ y: "-100%" }}
            transition={{ duration: 0.5 }}
            className="absolute bottom-0 left-0 right-0 bg-green-900 text-black p-4 flex justify-between items-center z-2"
            style={{
              fontFamily: "halyard-text",
              fontWeight: 300,
              fontSize: "14px",
              lineHeight: "16px",
              letterSpacing: "0",
              color: "#fff",
            }}
            onAnimationComplete={() => {
              setTimeout(() => {
                setInputState("idle");
              }, 5000);
            }}
          >
            Link saved
            <svg
              width="31"
              height="31"
              viewBox="0 0 31 31"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                width="31"
                height="31"
                rx="15.5"
                fill="url(#paint0_linear_26_28559)"
              />
              <path
                d="M10.3347 16.1458L13.5639 19.375L20.6681 11.625"
                stroke="white"
                strokeWidth="1.9375"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <defs>
                <linearGradient
                  id="paint0_linear_26_28559"
                  x1="15.5"
                  y1="0"
                  x2="15.5"
                  y2="31"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stopColor="#0DD334" />
                  <stop offset="1" stopColor="#459FA7" />
                </linearGradient>
              </defs>
            </svg>
          </motion.div>
        )}
        <input
          type="text"
          placeholder="Share your link with us"
          className="w-full bg-white/5 border-2 border-white/10 rounded-2xl p-4 py-5 font-[halyard-text] font-light text-[14px] leading-[16px] tracking-[0] focus:outline-none "
          name="message"
        />
        <button
          className="absolute right-2 top-1/2 -translate-y-1/2 bg-white w-9 h-9 rounded-full flex items-center justify-center pressable"
          type="submit"
        >
          {inputState === "loading" ? (
            <svg
              className="animate-spin"
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle
                cx="10"
                cy="10"
                r="8"
                stroke="#970DD3"
                strokeWidth="2"
                strokeDasharray="50"
                strokeDashoffset="20"
              />
            </svg>
          ) : (
            <svg
              width="20"
              height="20"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M17.5979 2.07182C17.217 1.66165 16.6199 1.50802 16.0493 1.45303C15.4499 1.39525 14.7319 1.43368 13.9589 1.53506C12.4087 1.7384 10.5358 2.20908 8.73671 2.7882C6.93646 3.36769 5.18162 4.06492 3.86742 4.73293C3.21336 5.06538 2.64608 5.40177 2.23368 5.72487C2.02833 5.88576 1.84095 6.05906 1.69999 6.24351C1.56555 6.41944 1.42411 6.66976 1.42605 6.97151C1.43115 7.76357 1.97056 8.32335 2.54499 8.69906C3.1313 9.08259 3.8949 9.37161 4.65401 9.59796C5.42126 9.82676 6.2281 10.0041 6.92173 10.1478C6.96719 10.1572 7.05805 10.176 7.16939 10.199C7.58866 10.2856 7.79829 10.3289 7.99536 10.2699C8.19241 10.2109 8.34397 10.0595 8.64691 9.75644L11.6462 6.75727C11.9643 6.43906 12.4803 6.43906 12.7985 6.75727C13.1167 7.07548 13.1167 7.59139 12.7985 7.90959L10.0015 10.7065C9.69265 11.0154 9.53824 11.1698 9.47982 11.3703C9.42131 11.5707 9.46849 11.7835 9.56276 12.209C9.92813 13.8588 10.2454 15.2221 10.562 16.1392C10.7469 16.6749 10.9549 17.1386 11.2183 17.4806C11.4932 17.8374 11.8672 18.1071 12.3595 18.1288C12.6659 18.1423 12.9207 18.0024 13.0954 17.8726C13.2795 17.7358 13.4527 17.5523 13.6133 17.3518C13.936 16.9486 14.275 16.3908 14.6123 15.7461C15.2903 14.4506 16.0081 12.7135 16.6156 10.9264C17.2227 9.14012 17.7286 7.27688 17.9723 5.72833C18.0939 4.95605 18.154 4.23882 18.1206 3.63806C18.0889 3.06833 17.9675 2.46985 17.5979 2.07182Z"
                fill="url(#paint0_linear_52_1522)"
              />
              <defs>
                <linearGradient
                  id="paint0_linear_52_1522"
                  x1="9.77788"
                  y1="1.42603"
                  x2="9.77788"
                  y2="18.1297"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stopColor="#970DD3" />
                  <stop offset="1" stopColor="#459FA7" />
                </linearGradient>
              </defs>
            </svg>
          )}
        </button>
      </form>

      {isNewUser && (
        <>
          <div className="flex items-center gap-4 my-4">
            <span className="font-[halyard-text] font-semibold text-[15px] leading-[20px] tracking-[0] text-white/30 text-center mx-auto">
              OR
            </span>
          </div>
          <a
            href="https://www.wa.link/0qm9xn"
            target="_blank"
            rel="noopener noreferrer"
          >
            <div className="bg-[#51F07E17] rounded-2xl p-4 pressable">
              <h3 className="font-[halyard-text] font-semibold text-[18px] leading-[24px] tracking-[0] text-center flex gap-2 justify-center">
                Simply use our WhatsApp bot
                <svg
                  width="25"
                  height="24"
                  viewBox="0 0 25 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clipPath="url(#clip0_54_1547)">
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M1.59351 23.0065L3.17048 17.2494C2.1976 15.5647 1.68599 13.6529 1.68658 11.6949C1.68951 5.56901 6.67448 0.585205 12.8009 0.585205C15.774 0.586376 18.5638 1.74364 20.6624 3.84335C22.7603 5.94364 23.9158 8.73467 23.9147 11.7036C23.9123 17.8295 18.9262 22.8139 12.8009 22.8139H12.7962C10.9365 22.8133 9.10843 22.3468 7.48521 21.4611L1.59351 23.0065Z"
                      fill="white"
                    />
                    <path
                      d="M12.8008 0.592285C15.7709 0.593496 18.56 1.75021 20.6572 3.84912C22.7544 5.94873 23.9084 8.73709 23.9072 11.7036C23.9049 17.8253 18.9218 22.8061 12.8008 22.8062C10.983 22.8056 9.18441 22.3568 7.58887 21.5083L7.48535 21.4536L7.37207 21.4839L1.60352 22.9946L3.14551 17.3687L3.17773 17.2495L3.11719 17.1421C2.18497 15.4862 1.69323 13.6053 1.69434 11.6958C1.69662 5.57343 6.67902 0.592285 12.8008 0.592285Z"
                      fill="white"
                      stroke="#F0F0F0"
                      strokeWidth="0.6"
                    />
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M19.3346 5.16982C17.5902 3.42426 15.2716 2.4625 12.8037 2.46191C7.70865 2.46191 3.56484 6.60396 3.5625 11.6955C3.56192 13.4405 4.05011 15.1392 4.97499 16.6102L5.19509 16.9597L4.26143 20.3671L7.75782 19.4504L8.09557 19.6506C9.51333 20.4924 11.1395 20.9372 12.7972 20.9378H12.8007C17.8923 20.9378 22.0361 16.7952 22.0378 11.7031C22.0384 9.23577 21.079 6.91538 19.3346 5.16982Z"
                      fill="#40C351"
                    />
                    <path
                      fillRule="evenodd"
                      clipRule="evenodd"
                      d="M10.0226 7.0509C9.81483 6.58847 9.59591 6.5791 9.39747 6.5709C9.23532 6.56388 9.05034 6.56447 8.86537 6.56447C8.68039 6.56447 8.37951 6.63412 8.12488 6.91217C7.87025 7.19022 7.15259 7.86164 7.15259 9.22788C7.15259 10.5941 8.14771 11.9147 8.28644 12.0997C8.42517 12.2847 10.2076 15.1781 13.0302 16.2915C15.3758 17.2164 15.8535 17.0326 16.3627 16.9863C16.872 16.9401 18.0059 16.3149 18.2371 15.6663C18.4683 15.0177 18.4683 14.4622 18.3992 14.3463C18.3296 14.2304 18.1446 14.1613 17.8671 14.022C17.5897 13.8827 16.224 13.2113 15.9694 13.1188C15.7147 13.0263 15.5298 12.9801 15.3442 13.2581C15.1592 13.5356 14.6271 14.1613 14.465 14.3463C14.3028 14.5319 14.1407 14.5553 13.8632 14.416C13.5858 14.2767 12.6913 13.984 11.6301 13.038C10.8047 12.3022 10.2474 11.3931 10.0853 11.1151C9.92312 10.8376 10.0677 10.6872 10.207 10.5485C10.3317 10.4238 10.4845 10.2242 10.6238 10.062C10.7625 9.89988 10.8088 9.78398 10.9013 9.599C10.9938 9.41344 10.9475 9.25129 10.8779 9.11256C10.8094 8.97325 10.2697 7.59998 10.0226 7.0509Z"
                      fill="white"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_54_1547">
                      <rect
                        width="24"
                        height="24"
                        fill="white"
                        transform="translate(0.5)"
                      />
                    </clipPath>
                  </defs>
                </svg>
              </h3>
              <p className="font-[halyard-text] font-light text-[14px] leading-[20px] tracking-[0] text-center text-white/60 mt-1">
                Found an amazing instagram reel or a brag worthy blog? Simply
                share the link with our bot and we'll do all the work for you!
              </p>
            </div>
          </a>
        </>
      )}

      {!isNewUser && (
        <svg
          width="285"
          height="90"
          viewBox="0 0 285 90"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="mx-auto pressable"
        >
          <g filter="url(#filter0_d_5_1210)">
            <rect
              x="30"
              y="30"
              width="217"
              height="36"
              rx="18"
              fill="url(#paint0_linear_5_1210)"
              fillOpacity="0.3"
              shapeRendering="crispEdges"
            />
            <rect
              x="30.5"
              y="30.5"
              width="216"
              height="35"
              rx="17.5"
              stroke="white"
              strokeOpacity="0.1"
              shapeRendering="crispEdges"
            />
            <path
              d="M43.178 53L40.14 43.76H41.974L43.71 49.542L44.116 51.53H44.186L44.592 49.542L46.356 43.76H48.176L45.082 53H43.178ZM49.3352 44.908C49.2652 44.908 49.2372 44.866 49.2372 44.796V43.34C49.2372 43.256 49.2792 43.214 49.3632 43.214H50.9872C51.0572 43.214 51.0992 43.256 51.0992 43.34V44.796C51.0992 44.866 51.0572 44.908 50.9872 44.908H49.3352ZM49.3352 53V46H51.0012V53H49.3352ZM59.0309 49.346C59.0309 49.5 59.0169 49.78 59.0029 49.864H54.3129C54.4109 51.306 55.1109 51.88 56.1049 51.88C56.8329 51.88 57.4349 51.502 57.7009 50.984L58.8069 51.754C58.2749 52.552 57.3789 53.168 55.9929 53.168C53.8229 53.168 52.6189 51.796 52.6189 49.5C52.6189 47.232 53.8509 45.818 55.9509 45.818C58.1769 45.818 59.0309 47.316 59.0309 49.346ZM55.8949 47.05C55.0409 47.05 54.4249 47.512 54.3409 48.8H57.3089V48.772C57.3089 47.75 56.9449 47.05 55.8949 47.05ZM61.7074 53L59.7614 46H61.5394L62.2814 49.556L62.6034 51.516H62.6734L63.1214 49.556L64.0874 46H65.8234L66.6914 49.556L67.1254 51.53H67.1954L67.5454 49.556L68.3574 46H70.0374L67.9934 53H66.2294L65.2074 49.108L64.9134 47.456H64.8434L64.5354 49.108L63.4434 53H61.7074ZM75.8136 53.14C74.4696 53.14 73.7136 52.356 73.7136 51.166C73.7136 49.85 74.7076 49.304 76.1216 49.024C77.4656 48.744 77.9696 48.59 78.0116 48.408V48.282C78.0116 47.54 77.6056 47.134 76.7236 47.134C75.8696 47.134 75.3096 47.624 75.0716 48.17L73.7836 47.484C74.2736 46.448 75.4636 45.846 76.9056 45.846C78.7396 45.846 79.6636 46.728 79.6636 48.422V50.704C79.6636 52.174 79.8316 52.776 80.0696 53H78.3616C78.1796 52.832 78.0676 52.3 78.0256 51.544C77.7316 52.51 76.8636 53.14 75.8136 53.14ZM76.3316 51.922C77.1436 51.922 77.8296 51.39 78.0116 50.592V49.122C77.8576 49.346 77.5776 49.514 77.0176 49.668C75.9116 49.962 75.4076 50.326 75.4076 50.998C75.4076 51.6 75.8276 51.922 76.3316 51.922ZM81.7102 53V42.682H83.3762V53H81.7102ZM85.4699 53V42.682H87.1359V53H85.4699ZM92.9209 55.814C92.5849 55.814 92.1649 55.702 92.0249 55.632V54.4C92.2209 54.442 92.5289 54.484 92.7669 54.484C93.5369 54.484 93.8589 54.204 94.1249 53.154L91.4089 46H93.2149L94.4609 49.948L94.7969 51.572H94.8809L95.2169 49.948L96.3649 46H98.1149L95.4829 53.546C95.0069 54.946 94.3629 55.814 92.9209 55.814ZM102.163 53.168C99.9228 53.168 98.7748 51.698 98.7748 49.486C98.7748 47.4 100.063 45.818 102.275 45.818C104.473 45.818 105.663 47.232 105.663 49.416C105.663 51.53 104.347 53.168 102.163 53.168ZM102.191 51.894C103.325 51.894 103.927 50.914 103.927 49.458C103.927 48.03 103.353 47.064 102.247 47.064C101.113 47.064 100.511 48.016 100.511 49.444C100.511 50.886 101.085 51.894 102.191 51.894ZM109.349 53.112C107.865 53.112 107.193 52.3 107.193 50.578V46H108.901V50.27C108.901 51.348 109.195 51.712 109.895 51.712C110.679 51.712 111.365 50.886 111.379 49.794V46H113.087V53H111.505V52.146L111.533 51.166H111.449C111.365 51.838 110.665 53.112 109.349 53.112ZM115.193 53V46H116.775V46.924L116.621 49.066H116.733C116.845 47.68 117.433 45.888 119.099 45.888H119.281V47.918H118.735C117.377 47.918 116.873 48.786 116.859 50.298V53H115.193ZM125.563 53.112C124.079 53.112 123.407 52.3 123.407 50.578V46H125.115V50.27C125.115 51.348 125.409 51.712 126.109 51.712C126.893 51.712 127.579 50.886 127.593 49.794V46H129.301V53H127.719V52.146L127.747 51.166H127.663C127.579 51.838 126.879 53.112 125.563 53.112ZM131.407 55.954V46H133.017V46.532L132.975 47.456H133.045C133.381 46.546 134.221 45.804 135.341 45.804C137.063 45.804 138.015 47.078 138.015 49.29C138.015 51.782 136.811 53.098 135.215 53.098C134.095 53.098 133.297 52.328 132.947 51.362H132.849L133.031 53.042V55.954H131.407ZM134.697 51.838C135.663 51.838 136.251 50.802 136.251 49.43C136.251 47.946 135.761 47.064 134.725 47.064C133.577 47.064 132.975 48.366 132.975 49.318V49.696C132.975 50.83 133.479 51.838 134.697 51.838ZM139.665 53V42.682H141.331V53H139.665ZM146.323 53.168C144.083 53.168 142.935 51.698 142.935 49.486C142.935 47.4 144.223 45.818 146.435 45.818C148.633 45.818 149.823 47.232 149.823 49.416C149.823 51.53 148.507 53.168 146.323 53.168ZM146.351 51.894C147.485 51.894 148.087 50.914 148.087 49.458C148.087 48.03 147.513 47.064 146.407 47.064C145.273 47.064 144.671 48.016 144.671 49.444C144.671 50.886 145.245 51.894 146.351 51.894ZM153.019 53.14C151.675 53.14 150.919 52.356 150.919 51.166C150.919 49.85 151.913 49.304 153.327 49.024C154.671 48.744 155.175 48.59 155.217 48.408V48.282C155.217 47.54 154.811 47.134 153.929 47.134C153.075 47.134 152.515 47.624 152.277 48.17L150.989 47.484C151.479 46.448 152.669 45.846 154.111 45.846C155.945 45.846 156.869 46.728 156.869 48.422V50.704C156.869 52.174 157.037 52.776 157.275 53H155.567C155.385 52.832 155.273 52.3 155.231 51.544C154.937 52.51 154.069 53.14 153.019 53.14ZM153.537 51.922C154.349 51.922 155.035 51.39 155.217 50.592V49.122C155.063 49.346 154.783 49.514 154.223 49.668C153.117 49.962 152.613 50.326 152.613 50.998C152.613 51.6 153.033 51.922 153.537 51.922ZM161.183 53.098C159.461 53.098 158.453 51.67 158.453 49.444C158.453 46.966 159.657 45.804 161.253 45.804C162.485 45.804 163.185 46.546 163.507 47.456H163.577L163.465 45.986V42.682H165.089V53H163.521L163.535 51.124V51.11C163.269 52.216 162.415 53.098 161.183 53.098ZM161.743 51.824C162.877 51.824 163.493 50.522 163.493 49.57V49.178C163.493 48.044 163.045 47.064 161.771 47.064C160.791 47.064 160.203 47.974 160.203 49.346C160.203 50.83 160.707 51.824 161.743 51.824ZM173.123 49.346C173.123 49.5 173.109 49.78 173.095 49.864H168.405C168.503 51.306 169.203 51.88 170.197 51.88C170.925 51.88 171.527 51.502 171.793 50.984L172.899 51.754C172.367 52.552 171.471 53.168 170.085 53.168C167.915 53.168 166.711 51.796 166.711 49.5C166.711 47.232 167.943 45.818 170.043 45.818C172.269 45.818 173.123 47.316 173.123 49.346ZM169.987 47.05C169.133 47.05 168.517 47.512 168.433 48.8H171.401V48.772C171.401 47.75 171.037 47.05 169.987 47.05ZM176.947 53.098C175.225 53.098 174.217 51.67 174.217 49.444C174.217 46.966 175.421 45.804 177.017 45.804C178.249 45.804 178.949 46.546 179.271 47.456H179.341L179.229 45.986V42.682H180.853V53H179.285L179.299 51.124V51.11C179.033 52.216 178.179 53.098 176.947 53.098ZM177.507 51.824C178.641 51.824 179.257 50.522 179.257 49.57V49.178C179.257 48.044 178.809 47.064 177.535 47.064C176.555 47.064 175.967 47.974 175.967 49.346C175.967 50.83 176.471 51.824 177.507 51.824ZM186.136 53V42.682H187.802V53H186.136ZM189.896 44.908C189.826 44.908 189.798 44.866 189.798 44.796V43.34C189.798 43.256 189.84 43.214 189.924 43.214H191.548C191.618 43.214 191.66 43.256 191.66 43.34V44.796C191.66 44.866 191.618 44.908 191.548 44.908H189.896ZM189.896 53V46H191.562V53H189.896ZM193.655 53V46H195.279V46.952C195.279 47.148 195.237 47.806 195.237 47.806H195.321C195.713 46.574 196.581 45.832 197.729 45.832C199.045 45.832 199.857 46.616 199.857 48.324V53H198.149V48.758C198.149 47.61 197.673 47.288 196.987 47.288C196.133 47.288 195.349 48.058 195.335 49.402V53H193.655ZM201.872 53V42.682H203.496V47.834L203.412 49.584L206.086 46H208.13L205.834 48.8L208.284 53H206.408L204.63 49.822L203.454 51.18L203.482 51.614V53H201.872ZM211.589 53.14C210.413 53.14 209.293 52.65 208.747 51.684L209.853 50.844C210.287 51.572 210.931 51.894 211.631 51.894C212.191 51.894 212.667 51.656 212.667 51.166C212.667 50.564 211.967 50.326 210.917 49.962C209.979 49.626 209.055 49.136 209.055 47.918C209.055 46.742 210.077 45.846 211.715 45.846C212.989 45.846 213.759 46.35 214.263 47.078L213.157 47.974C212.975 47.596 212.499 47.078 211.701 47.078C211.099 47.078 210.721 47.386 210.721 47.792C210.721 48.394 211.477 48.646 212.317 48.94C213.353 49.304 214.333 49.766 214.333 51.082C214.333 52.384 213.199 53.14 211.589 53.14Z"
              fill="white"
              fillOpacity="0.8"
            />
            <path
              d="M233.667 47.9999L223.667 47.9999"
              stroke="white"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
            <path
              d="M231 44.6666L233.626 47.2929C233.96 47.6262 234.126 47.7929 234.126 48C234.126 48.2071 233.96 48.3737 233.626 48.7071L231 51.3333"
              stroke="white"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </g>
          <defs>
            <filter
              id="filter0_d_5_1210"
              x="0"
              y="0"
              width="285"
              height="104"
              filterUnits="userSpaceOnUse"
              colorInterpolationFilters="sRGB"
            >
              <feFlood floodOpacity="0" result="BackgroundImageFix" />
              <feColorMatrix
                in="SourceAlpha"
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                result="hardAlpha"
              />
              <feOffset dx="4" dy="4" />
              <feGaussianBlur stdDeviation="17" />
              <feComposite in2="hardAlpha" operator="out" />
              <feColorMatrix
                type="matrix"
                values="0 0 0 0 0.762058 0 0 0 0 0.379282 0 0 0 0 1 0 0 0 0.14 0"
              />
              <feBlend
                mode="normal"
                in2="BackgroundImageFix"
                result="effect1_dropShadow_5_1210"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_dropShadow_5_1210"
                result="shape"
              />
            </filter>
            <linearGradient
              id="paint0_linear_5_1210"
              x1="30"
              y1="48"
              x2="247"
              y2="48"
              gradientUnits="userSpaceOnUse"
            >
              <stop stopColor="#F38BFF" />
              <stop offset="0.346565" stopColor="#7019AA" stopOpacity="0.2" />
              <stop offset="0.616593" stopColor="#3E5288" />
            </linearGradient>
          </defs>
        </svg>
      )}

      {isNewUser && (
        <>
          <div className="mt-[52px] mb-[32px]">
            <h2 className="font-[halyard-text] font-[600] text-[18px] leading-[24px] tracking-[0] flex items-center gap-2">
              Get inspiration for{" "}
              <button
                className="flex items-center gap-1 text-[#DFBFFF] underline underline-offset-3 font-[halyard-text] font-[600] text-[18px] leading-[24px] tracking-[0]"
                onClick={() => setIsSearchSheetOpen(true)}
              >
                {selectedTrip} trips <ChevronDown size={18} />
              </button>
            </h2>
          </div>

          <div className="flex gap-4 overflow-x-auto mt-4 pb-4">
            {tripInspirations[selectedTrip].map((trip, i) => (
              <div key={i} className="min-w-[180px]">
                <Image
                  src={trip.image}
                  alt={trip.city}
                  width={180}
                  height={220}
                  className="rounded-lg object-cover"
                />
                <div className="mt-2">
                  <div className="flex items-center gap-2 text-xs">
                    <div className="w-5 h-5 rounded-full bg-white/20"></div>
                    <span>{trip.user}</span>
                  </div>
                  <p className="text-sm mt-1">{trip.plan}</p>
                </div>
              </div>
            ))}
          </div>
          <SearchSheet
            open={isSearchSheetOpen}
            onOpenChange={setIsSearchSheetOpen}
          />
        </>
      )}
    </div>
  );
}
